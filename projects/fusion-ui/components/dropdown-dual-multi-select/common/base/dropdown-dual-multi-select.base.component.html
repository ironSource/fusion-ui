<div class="is-dropdown-dual-multi-select">
    <ng-container *ngTemplateOutlet="opened$.getValue() ? dropdownDualMultiSelectLayout : dropdownDualMultiSelectButton"></ng-container>
</div>

<div *ngIf="templateRef"  (click)="onClickDualMultiSelectButton()">
    <ng-container [ngTemplateOutlet]="templateRef"></ng-container>
</div>

<ng-template #dropdownDualMultiSelectButton>
    <div class="dropdown-dual-multi-select-button">
        <ng-container
            *ngIf="!templateRef"
            [ngTemplateOutlet]="dynamicPlaceholder ? dynamicDropdownDualMultiSelectButton : regularDropdownDualMultiSelectButton"
        ></ng-container>
    </div>
</ng-template>




<ng-template #regularDropdownDualMultiSelectButton>
    <div class="dual-select-button" [class.btn-disabled]="isDisabled" (click)="onClickDualMultiSelectButton()">
        <span class="fu-dual-multi-select-placeholder">
            {{ placeholder$ | async }}
        </span>
        <i class="icon right">
            <fusion-icon [name]="{iconName: 'angle-down', iconVersion: 'v3'}"></fusion-icon>
        </i>
    </div>
</ng-template>

<ng-template #dynamicDropdownDualMultiSelectButton>
    <div class="dual-select-button" [class.btn-disabled]="isDisabled" (click)="onClickDualMultiSelectButton()">
        <span class="fu-dual-multi-select-placeholder">
            <fusion-dynamic-components [configuration]="dynamicPlaceholder"></fusion-dynamic-components>
        </span>
    </div>
</ng-template>

<ng-template #dropdownDualMultiSelectLayout>
    <div
        class="dropdown-dual-multi-select-layout"
        [class.fu-options-position-left]="isPositionLeft"
        (fusionClickOutside)="onOutsideClick($event)"
    >
        <fusion-dropdown-dual-multi-select-header
            [formControl]="searchControlTerm"
            [title]="title"
        ></fusion-dropdown-dual-multi-select-header>

        <fusion-dropdown-dual-multi-select-body
            (scrollDown)="onScrollDown()"
            [formControl]="preSelectedItems"
            [searchTerm]="searchControlTerm.valueChanges | async"
            [totalItems]="totalItems"
            [items]="items$ | async"
            [isPendingItems]="pendingItems"
        ></fusion-dropdown-dual-multi-select-body>

        <fusion-dropdown-dual-multi-select-footer
            (closeSelect)="closeDropdownDualSelect()"
            (applySelect)="applySelect($event)"
        ></fusion-dropdown-dual-multi-select-footer>
    </div>
</ng-template>

<ng-template #chipContent>
    <div [fusionTooltip]="chipDefaultContent" class="fu-chip-content-default">
        <div class="fu-chip-label">{{ title + ': ' }}</div>
        <div class="fu-chip-text">{{ selected$ | async }}</div>
    </div>
</ng-template>
