<div class="fu-chart-labels-wrapper" [attr.data-testid]="testId">
    <div class="fu-chart-label" *ngFor="let datasetLabel of labels; let i = index"
         [attr.data-testid]="getTestId(testId, ChartLabelTestIdModifiers.LABEL)"
         [class.fu-clickable]="datasetLabel?.labelVisible"
         [class.fu-align-right]="datasetLabel?.alignToRight"
         [style.max-width]="'calc(100% / ' + labels?.length + ' - var(--fu-chart-label-width-normalize, 8px)'"
         (mouseenter)="!datasetLabel.typeCheckbox && onLabelHover(datasetLabel)"
         (mouseleave)="!datasetLabel.typeCheckbox && onLabelHover(null)"
         (click)="chartLabelClicked($event, datasetLabel)"
    >
        <ng-container *ngIf="!datasetLabel.typeCheckbox">
            <div class="fu-chart-label-color"
             [attr.data-testid]="getTestId(testId, ChartLabelTestIdModifiers.LABEL_COLOR)"
                 [style.background-color]="getLabelBGColor(datasetLabel.color)"
                 [style.border-color]="datasetLabel.color"
            >
            </div>
            <fusion-icon class="fu-chart-label-icon" *ngIf="datasetLabel.icon"
                     [attr.data-testid]="getTestId(testId, ChartLabelTestIdModifiers.LABEL_ICON)"
                     [name]="datasetLabel.icon"></fusion-icon>
            <div class="fu-chart-label-text truncate" [class.fu-label-strikethrough]="!(datasetLabel?.labelVisible?.value ?? true)" [attr.data-testid]="testId + '_' + i"
                 [fusionTooltip]="datasetLabel.label">{{ datasetLabel.label }}
            </div>
        </ng-container>
        <ng-container *ngIf="datasetLabel.typeCheckbox">
            <fusion-checkbox [label]="datasetLabel.label" [backgroundColor]="datasetLabel.backgroundColor" [formControl]="datasetLabel?.labelVisible"></fusion-checkbox>
        </ng-container>
    </div>
</div>
